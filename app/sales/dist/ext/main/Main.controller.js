sap.ui.define(["sap/fe/core/PageController","sap/viz/ui5/format/ChartFormatter","sap/viz/ui5/api/env/Format"],function(e,t,a){"use strict";return e.extend("sales.ext.main.Main",{onInit:function(){const e=new sap.ui.model.json.JSONModel({});this.getView().setModel(e,"globalModel")},onAfterRendering:function(){this.onFetchData()},onFetchChartData:function(){this.onSchemaChart();this.onRegionChart()},onSchemaChart:function(){a.numericFormatter(t.getInstance());const e=t.DefaultPattern,o=this.getView().getModel("globalModel"),i=this.getAppComponent().getModel(),l=i.getServiceUrl(),n=this.getView().byId("idSchema"),s=new sap.viz.ui5.data.FlattenedDataset({dimensions:[{name:"Type",value:"{globalModel>SCHEME}"}],measures:[{name:"Total Incentive",value:"{globalModel>TOTALINSENTIVE}"}],data:{path:"globalModel>/oIncentiveSchemeChart"}});n.setVizProperties({plotArea:{colorPalette:["#A4C639"],dataLabel:{showTotal:true,visible:false}},valueAxis:{label:{formatString:e.STANDARDINTEGER},title:{visible:false}},categoryAxis:{title:{visible:false}},tooltip:{visible:true},title:{text:"Schema Wise"}});n.setDataset(s);n.setModel(this.getModel("globalModel"));n.addFeed(this._getFeedItem({uid:"valueAxis",type:"Measure",values:["Total Incentive"]}));n.addFeed(this._getFeedItem({uid:"categoryAxis",type:"Dimension",values:["Type"]}))},onRegionChart:function(){a.numericFormatter(t.getInstance());const e=t.DefaultPattern,o=this.getView().getModel("globalModel"),i=this.getAppComponent().getModel(),l=i.getServiceUrl(),n=this.getView().byId("idRegion"),s=new sap.viz.ui5.data.FlattenedDataset({dimensions:[{name:"Type",value:"{globalModel>REGIONCODE}"}],measures:[{name:"Total Incentive",value:"{globalModel>TOTALINSENTIVE}"}],data:{path:"globalModel>/oIncentiveRegionChart"}});n.setVizProperties({plotArea:{colorPalette:["#5F27CD"],dataLabel:{showTotal:true,visible:false}},valueAxis:{label:{formatString:e.STANDARDINTEGER},title:{visible:false}},categoryAxis:{title:{visible:false}},tooltip:{visible:true},title:{text:"Region Wise"}});n.setDataset(s);n.setModel(this.getModel("globalModel"));n.addFeed(this._getFeedItem({uid:"valueAxis",type:"Measure",values:["Total Incentive"]}));n.addFeed(this._getFeedItem({uid:"categoryAxis",type:"Dimension",values:["Type"]}))},_getFeedItem:function(e){return new sap.viz.ui5.controls.common.feeds.FeedItem(e)},onFetchData:function(){const e=this.getView().getModel("globalModel"),t=this.getAppComponent().getModel(),a=t.getServiceUrl();jQuery.ajax({type:"POST",url:a+"schemewise_salesAgent",data:JSON.stringify({}),dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){e.setProperty("/oIncentiveSchemeChart",t.value.SchemeSalesData)},error:console.error});jQuery.ajax({type:"POST",url:a+"regionwise_salesAgent",data:JSON.stringify({}),dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){e.setProperty("/oIncentiveRegionChart",t.value.RegionSalesData)},error:console.error});this.onFetchChartData()}})});
//# sourceMappingURL=Main.controller.js.map